{"version":3,"sources":["page/resume/component/ContentInfo/index.tsx","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/_@babel_runtime@7.10.2@@babel/runtime/helpers/esm/nonIterableRest.js","page/resume/preview/index.tsx"],"names":["Index","props","domRef","useRef","type","content","isEdit","onChange","onBlur","e","current","value","handleChange","className","onKeyUp","handleSelectMouseUp","onDrop","onDragOver","preventDefault","ref","style","minHeight","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","defaultProps","_slicedToArray","arr","i","arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","unsupportedIterableToArray","nonIterableRest","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","Array","from","test","_arrayLikeToArray","len","arr2","_arrayWithHoles","isArray","_nonIterableRest","TypeError","timer","localData","localStorage","getItem","initData","JSON","parse","useState","currentId","setCurrentId","useEffect","id","history","location","search","replace","Number","setTimeFun","clearTimeout","setTimeout","handleBtn","fake_click","obj","ev","document","createEvent","initMouseEvent","window","dispatchEvent","cuId","alert","c","console","log","map","item","index","key","onClick","outerHTMl","documentElement","outerHTML","urlObject","URL","webkitURL","export_blob","Blob","save_link","createElement","href","createObjectURL","download","exportFile","changeChild"],"mappings":"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","file":"static/js/preview.41a74991.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\n\ninterface Props {\n  type?: string;\n  content: any[];\n  isEdit?: boolean;\n  onChange?: (value?: Node, type?: string) => void;\n  handleSelectMouseUp?: (\n    e: React.MouseEvent<HTMLDivElement> | React.KeyboardEvent<HTMLDivElement>\n  ) => void;\n  onDrop?: (e: any) => void;\n}\n\nconst Index: React.FC<Props> = (props) => {\n  const domRef = useRef<HTMLDivElement>(null);\n  const { type, content, isEdit, onChange } = props;\n  const handleChange = (e: React.FormEvent<HTMLDivElement>, type?: string) => {\n    if (domRef && domRef.current) {\n      let value = domRef.current;\n      onChange && onChange(value, type);\n    }\n  };\n  return (\n    <div\n      onBlur={(e) => handleChange(e, type)}\n      className=\"content-info-wrapper\"\n      onKeyUp={(e) => props.handleSelectMouseUp&&props.handleSelectMouseUp(e)}\n      onDrop={(e) => props.onDrop&&props.onDrop(e)}\n      onDragOver={(e) => e.preventDefault()}\n    >\n      {type === \"label-bar\" && (\n        <div\n          className=\"label_wrapper\"\n          ref={domRef}\n          style={{ minHeight: 100 }}\n          contentEditable={isEdit}\n          suppressContentEditableWarning={true}\n          dangerouslySetInnerHTML={{ __html: content[0] }}\n        />\n      )}\n\n      {type === \"one-column\" && (\n        <div\n          className=\"one-wrapper\"\n          ref={domRef}\n          style={{ minHeight: 300 }}\n          contentEditable={isEdit}\n          suppressContentEditableWarning={true}\n          dangerouslySetInnerHTML={{ __html: content[0] }}\n        />\n      )}\n\n      {type === \"two-column\" && (\n        <div className=\"two_wrapper\" style={{ minHeight: 300 }} ref={domRef}>\n          <div\n            className=\"left_wrapper\"\n            contentEditable={isEdit}\n            suppressContentEditableWarning={true}\n            dangerouslySetInnerHTML={{ __html: content[0] }}\n          />\n          <div\n            className=\"right_wrapper\"\n            contentEditable={isEdit}\n            suppressContentEditableWarning={true}\n            dangerouslySetInnerHTML={{ __html: content[1] }}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nIndex.defaultProps = {\n  content: [\"请输入内容\", \"请输入内容\"],\n  isEdit: true,\n};\n\nexport default Index;\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useState, useEffect } from \"react\";\nimport ContentInfo from \"../component/ContentInfo\";\nimport { Button,Animation } from \"rockui\";\n\ninterface Props {\n  history: any;\n}\n\nlet timer: any\nconst Index: React.FC<Props> = (props) => {\n  let localData = localStorage.getItem(\"resume_content\");\n  let initData: any[] = localData ? JSON.parse(localData) : [];\n\n  let [currentId, setCurrentId] = useState<number>(-1);\n\n  useEffect(() => {\n    const id = props.history.location.search.replace(/\\?id=+/, \"\");\n    if(!id)return\n    if(id>initData.length){\n      props.history.push(\"/resume/preview?id=\" + 0);\n    }\n    setCurrentId(Number(id));\n    setTimeFun()\n    return ()=>{\n      clearTimeout(timer)\n    }\n  }, [currentId]);\n\n  const setTimeFun=()=>{\n    timer = setTimeout(()=>{\n      handleBtn('next')\n    },3000)\n  }\n\n  // 导出\n  const exportFile = (name: string) => {\n    let outerHTMl = document.documentElement.outerHTML;\n    let urlObject = window.URL || window.webkitURL || window;\n    // 创建blob对象，解析流数据\n    let export_blob = new Blob([outerHTMl]);\n    // let export_blob = new Blob([outerHTMl],{type:'application/pdf;chartset=UTF-8'})\n    // type word则为word，excel为excel\n    let save_link = document.createElement(\"a\");\n    save_link.href = urlObject.createObjectURL(export_blob);\n    save_link.download = name;\n    fake_click(save_link);\n  };\n  // 点击下载\n  const fake_click = (obj: HTMLAnchorElement) => {\n    let ev = document.createEvent(\"MouseEvents\");\n    ev.initMouseEvent(\n      \"click\",\n      true,\n      false,\n      window,\n      0,\n      0,\n      0,\n      0,\n      0,\n      false,\n      false,\n      false,\n      false,\n      0,\n      null\n    );\n    obj.dispatchEvent(ev);\n  };\n\n  // 控制幻灯片上下张\n  const handleBtn = (type: string) => {\n    let cuId: number;\n    if(type==='return'){\n      props.history.push(\"/resume\")\n      return\n   }\n    if (type === \"prev\") {\n      cuId = currentId > 0 ? currentId - 1 : 0;\n      currentId === 0 && alert(\"已经是第一张了\");\n    } else {\n      cuId =\n        currentId + 1 < initData.length - 1\n          ? currentId + 1\n          : initData.length - 1;\n      let c = currentId + 1;\n      console.log(c,'cc');\n      console.log(initData.length,'initData.length');\n      c === initData.length && alert(\"已经是最后一张了\") && clearTimeout(timer);\n    }\n    setCurrentId(cuId);\n    props.history.push(\"/resume/preview?id=\" + cuId);\n  };\n\n  return (\n    <div className=\"resume_wrapper\">\n      {currentId < 0 && (\n        <div className=\"box_wrapper\">\n          <h2>简历预览</h2>\n          {initData.map((item, index) => {\n            return (\n              <div key={index}>\n                <ContentInfo\n                  type={item.type}\n                  content={initData[index].content}\n                  isEdit={false}\n                />\n              </div>\n            );\n          })}\n          <div className=\"resumen_preview_right_wrapper\">\n            <Button onClick={() => exportFile(\"resume.html\")}>\n              导出html文件\n            </Button>\n          </div>\n        </div>\n      )}\n      {currentId >= 0 && (\n        <Animation changeChild={true}>\n        <div className=\"box_wrapper\">\n          <h3>幻灯片</h3>\n          <ContentInfo\n            type={initData[currentId]?.type}\n            content={initData[currentId]?.content}\n            isEdit={false}\n          />\n          <Button onClick={() => handleBtn(\"prev\")}>上一张</Button>\n          <Button onClick={() => handleBtn(\"next\")}>下一张</Button>\n          <Button onClick={() => handleBtn(\"return\")}>返回</Button>\n        </div>\n        </Animation>\n      )}\n    </div>\n  \n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}